var se=Object.defineProperty;var re=(e,t,s)=>t in e?se(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var P=(e,t,s)=>re(e,typeof t!="symbol"?t+"":t,s);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const d of i.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function s(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=s(r);fetch(r.href,i)}})();var ne=Object.defineProperty,B=e=>{throw TypeError(e)},ie=(e,t,s)=>t in e?ne(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,o=(e,t,s)=>ie(e,typeof t!="symbol"?t+"":t,s),H=(e,t,s)=>t.has(e)||B("Cannot "+s),u=(e,t,s)=>(H(e,t,"read from private field"),s?s.call(e):t.get(e)),w=(e,t,s)=>t.has(e)?B("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),g=(e,t,s,n)=>(H(e,t,"write to private field"),t.set(e,s),s),$=(e,t,s)=>(H(e,t,"access private method"),s),oe=class{constructor(e){this.factory=e,o(this,"promise",null)}getValue(){return this.promise??(this.promise=this.factory()),this.promise}isValueCreated(){return this.promise!==null}},R,F=class{constructor(e){w(this,R),g(this,R,e)}restore(e){return u(this,R)}};R=new WeakMap;var A,M,q,ae=class{constructor(e,t){w(this,A),w(this,M),w(this,q),g(this,A,t),g(this,M,e.has(t)),g(this,q,e.get(t))}restore(e){return u(this,M)?e.set(u(this,A),u(this,q)):e.delete(u(this,A))}};A=new WeakMap;M=new WeakMap;q=new WeakMap;var C,b,L,z,J=class{constructor(t){w(this,L),w(this,C),w(this,b,!1),g(this,C,t)}has(t){return u(this,C).has(t)||!1}get(t){return u(this,C).get(t)}set(t,s){const n=$(this,L,z).call(this);return u(n,C).set(t,s),n}delete(t){const s=$(this,L,z).call(this);return u(s,C).delete(t),s}freeze(){g(this,b,!0)}isFrozen(){return u(this,b)}};C=new WeakMap;b=new WeakMap;L=new WeakSet;z=function(){return u(this,b)?new J(new Map(u(this,C))):this};var ce=J,p,_=class{static has(e){return u(this,p).has(e)}static get(e){return u(this,p).get(e)}static set(e,t){const s=u(this,p),n=s.isFrozen()?new F(s):new ae(s,e);return g(this,p,u(this,p).set(e,t)),n}static restore(e){g(this,p,e.restore(u(this,p)))}static snapshot(){return u(this,p).freeze(),new F(u(this,p))}static switch(e){const t=u(this,p);return g(this,p,e.restore(t)),new F(t)}};p=new WeakMap;w(_,p,new ce(new Map));var x,T,he=class{constructor(e){w(this,x,""),w(this,T),e&&("name"in e&&g(this,x,String(e.name)),g(this,T,e.defaultValue))}get name(){return u(this,x)}run(e,t,...s){const n=_.set(this,e);try{return t.apply(null,s)}finally{_.restore(n)}}get(){return _.has(this)?_.get(this):u(this,T)}};x=new WeakMap;T=new WeakMap;var ue={Variable:he},le=class K{constructor(t){o(this,"singletons",new Map),o(this,"factories",new Map),o(this,"values",new Map),o(this,"parent"),this.parent=t}addSingleton(t,s){this.singletons.set(t,s??new t)}addTransient(t,s){this.factories.set(t,s)}addValue(t,s){this.values.set(t,s)}get(t){if(typeof t=="function"){if(this.singletons.has(t))return this.singletons.get(t);if(this.factories.has(t))return this.factories.get(t)();if(this.parent)return this.parent.get(t);const s=new t;return this.singletons.set(t,s),s}else if(typeof t=="string"||typeof t=="object"&&typeof t=="symbol"){if(this.values.has(t))return this.values.get(t);if(this.parent)return this.parent.get(t);throw new Error(`Dependency with key '${String(t)}' not found`)}throw new Error("Unsupported key type in the injector")}getScoped(){return new K(this)}runScoped(t){const s=this.getScoped();return de.run(s,t)}},fe=new le,de=new ue.Variable({defaultValue:fe});async function I(e){try{return[null,await e()]}catch(t){return[t,void 0]}}var pe=class{constructor(e){o(this,"configLazy"),this.configLazy=new oe(async()=>{const t=await e();return{baseUrl:t.baseUrl??"",resourcePrefix:t.resourcePrefix??"",request:t.request??{},middlewares:t.middlewares??[]}})}async get(e="",t={}){return this.request(e,{...t,method:"GET"})}async post(e="",t={}){return this.request(e,{...t,method:"POST"})}async put(e="",t={}){return this.request(e,{...t,method:"PUT"})}async delete(e="",t={}){return this.request(e,{...t,method:"DELETE"})}async patch(e="",t={}){return this.request(e,{...t,method:"PATCH"})}async request(e="",t={}){const s=await this.configLazy.getValue(),n={...s.request,...t},r={url:this.resolveUrl(s,e)},i=s.middlewares??[],d=i.map(c=>c.request).filter(c=>typeof c=="function").reverse().reduce((c,m)=>E=>m({request:E,context:r,next:c}),c=>fetch(r.url,c)),[h,a]=await I(()=>d(n));if(h)return{error:h};const l=i.map(c=>c.response).filter(c=>typeof c=="function").reverse().reduce((c,m)=>E=>m({response:E,context:r,next:c}),async c=>c),[f,y]=await I(()=>l(a));return f?{error:f}:{data:y,response:a}}resolveUrl(e,t){const[s,n]=t.split("?"),r=this.resolvePath(e.baseUrl,e.resourcePrefix,s);return[/^https?:\/\//.test(r)?r:`/${r}`,n??""].join("?")}resolvePath(...e){const t=[],s=e.splice(0,1)[0]??"",n=/^[a-zA-Z][a-zA-Z\d+\-.]*:\/\//.exec(s);if(n){const r=s.replace(/^[a-zA-Z][a-zA-Z\d+\-.]*:\/\//,"");e.unshift(r),t.push(n[0].replace("//","/"))}return e.filter(r=>r).join("/").split("/").forEach(r=>{r==="."||r===""||(r===".."?t.pop():t.push(r))}),t.join("/")}};function me(e,t={}){let s="",n=t;typeof e=="string"?s=e:n=e;const r=new URLSearchParams(Object.entries(n).reduce((i,[d,h])=>(i[d]=String(h),i),{})).toString();return[s,r].join("?")}function ve({serialize:e=JSON.stringify,deserialize:t}={}){return{async request({request:s,next:n}){const r={...s};return typeof s.body=="object"&&!(s.body instanceof FormData)&&!(s.body instanceof Blob)&&s.body!==null?(r.body=e(s.body),r.headers=new Headers(s.headers),r.headers.append("Content-Type","application/json"),n(r)):n(s)},async response({response:s,next:n}){var i;const r=(i=s.headers.get("content-type"))==null?void 0:i.toLowerCase();return r!=null&&r.includes("application/json")?typeof t!="function"?s.json():t(await s.text()):r!=null&&r.includes("text/")?s.text():n(s)}}}var S=Symbol("render");function X(e){return typeof e=="function"||Y(e)||k(e)}function Y(e){return typeof e=="object"&&e!==null&&S in e&&typeof e[S]=="function"}function k(e){return typeof e=="function"&&e.prototype&&S in e.prototype&&typeof e.prototype[S]=="function"}function ge(e,t){return Object.is(e,t)}var we=class extends Error{},O=class extends Error{},j=class extends Error{},ye=class extends Error{},Ce=class{constructor(){o(this,"queue",new Set)}scheduleEffect(e){this.queue.add(e)}cancelEffect(e){this.queue.delete(e)}flushEffects(){for(const e of this.queue)this.queue.delete(e),e.run()}clearEffects(){this.queue.clear()}},V=new Ce;function U(e){return!!e.producers&&e.producers.length>0&&!!e.producerLastVersions&&e.producerLastVersions.length>0}function W(e){return!!e.consumers&&e.consumers.length>0}var Ee=class{constructor(){o(this,"inNotificationPhase",!1),o(this,"epoch",0),o(this,"activeConsumer",null),o(this,"postSignalSetFn"),this.setPostSignalSetMiddleware(()=>V.flushEffects.bind(V))}assertNotInReactiveContext(){if(this.activeConsumer!==null)throw new ye}setActiveConsumer(e){const t=this.activeConsumer;return this.activeConsumer=e,t}producerAccessed(e){if(this.inNotificationPhase)throw new we;this.activeConsumer!==null&&(e.consumers=e.consumers??[],e.consumers.includes(this.activeConsumer)||e.consumers.push(this.activeConsumer),this.activeConsumer.producers=this.activeConsumer.producers??[],this.activeConsumer.producerLastVersions=this.activeConsumer.producerLastVersions??[],this.activeConsumer.producers.includes(e)||(this.activeConsumer.producers.push(e),this.activeConsumer.producerLastVersions.push(e.version)))}signalValueChanged(e){var t;e.version++,this.epoch++,this.notifyConsumers(e),(t=this.postSignalSetFn)==null||t.call(this)}setPostSignalSetMiddleware(e){const t=this.postSignalSetFn??(()=>{});this.postSignalSetFn=e(t)}notifyConsumers(e){if(!W(e))return;const t=this.inNotificationPhase;this.inNotificationPhase=!0;try{for(const s of e.consumers)s.notify()}finally{this.inNotificationPhase=t}}updateValueVersion(e){if(!(!e.stale&&e.lastSyncEpoch===this.epoch)){if(!e.shouldRecompute()&&!this.haveAnyConsumerProducersChanged(e)){e.stale=!1,e.lastSyncEpoch=this.epoch;return}e.recomputeValue(),e.stale=!1,e.lastSyncEpoch=this.epoch}}haveAnyConsumerProducersChanged(e){if(!U(e))return!1;for(let t=0;t<e.producers.length;t++){const s=e.producers[t],n=e.producerLastVersions[t];if(n!==s.version||(v.updateValueVersion(s),n!==s.version))return!0}return!1}producerUpdatesAllowed(){var e;return((e=this.activeConsumer)==null?void 0:e.consumerAllowSignalWrites)!==!1}untracked(e){const t=this.setActiveConsumer(null);try{return e()}finally{this.setActiveConsumer(t)}}removeFromGraph(e){if(U(e)){for(const t of e.producers)if(W(t)){const s=t.consumers.indexOf(e);s!==-1&&t.consumers.splice(s,1)}}if(W(e)){for(const t of e.consumers)if(U(t)){let s=-1;for(;(s=t.producers.indexOf(e)??-1)!=-1;)t.producers.splice(s,1),t.producerLastVersions.splice(s,1)}}e.consumers=void 0,e.producers=void 0,e.producerLastVersions=void 0}},v=new Ee;function Se(e,t){const s=new Ne(e,t);return Object.assign(function(){return s.get()},{set(n){s.set(n)},update(n){s.update(n)},toString(){return s.toString()}})}var Ne=class{constructor(e,t){o(this,"version",0),o(this,"lastSyncEpoch",0),o(this,"stale",!1),o(this,"consumerAllowSignalWrites",!1),o(this,"equals"),o(this,"consumers"),o(this,"producers"),o(this,"producerLastVersions"),o(this,"value"),this.value=e,this.equals=(t==null?void 0:t.equals)??ge}get(){return v.producerAccessed(this),this.value}set(e){if(!v.producerUpdatesAllowed())throw new j;this.equals(this.value,e)||(this.value=e,v.signalValueChanged(this))}update(e){if(!v.producerUpdatesAllowed())throw new j;this.set(e(this.value))}shouldRecompute(){return!1}recomputeValue(){throw new O}notify(){throw new O}destroy(){v.removeFromGraph(this)}toString(){return`[Signal: ${this.value}]`}},Ae=class{constructor(e,t,s=!1){this.fn=e,this.schedule=t,this.consumerAllowSignalWrites=s,o(this,"version",0),o(this,"lastSyncEpoch",0),o(this,"stale",!1),o(this,"consumers"),o(this,"producers"),o(this,"producerLastVersions"),o(this,"hasRun",!1),o(this,"cleanupHandler"),v.assertNotInReactiveContext()}shouldRecompute(){throw new O}recomputeValue(){throw new O}notify(){this.stale||(this.stale=!0,this.schedule(this))}destroy(){this.cleanUp(),this.fn=()=>{},this.schedule=()=>{},this.cleanupHandler=void 0,v.removeFromGraph(this)}run(){if(this.stale=!1,this.hasRun&&!v.haveAnyConsumerProducersChanged(this))return;this.hasRun=!0,this.producers=void 0,this.producerLastVersions=void 0;const e=v.setActiveConsumer(this);try{this.cleanUp(),this.cleanupHandler=void 0,this.fn(this.registerOnCleanUp.bind(this))}finally{v.setActiveConsumer(e)}}cleanUp(){var e;(e=this.cleanupHandler)==null||e.call(this)}registerOnCleanUp(e){this.cleanupHandler=e}};function G(e,t){return new _e(e,t)}var _e=class{constructor(e,t){this.effectFn=e,o(this,"watcher"),o(this,"onError",console.error),this.onError=(t==null?void 0:t.onError)??this.onError,this.watcher=new Ae(s=>this.runEffect(s),()=>this.schedule(),t==null?void 0:t.allowSignalWrites),this.watcher.notify(),V.flushEffects()}destroy(){V.cancelEffect(this.watcher),this.watcher.destroy()}runEffect(e){var t;try{this.effectFn(e)}catch(s){(t=this.onError)==null||t.call(this,s)}}schedule(){V.scheduleEffect(this.watcher)}};function be(e,t,s){const n=e.length,r=t.length,i=Array.from({length:n+1},()=>Array(r+1).fill(0));for(let l=0;l<n;l++)for(let f=0;f<r;f++)s(e[l],t[f])?i[l+1][f+1]=i[l][f]+1:i[l+1][f+1]=Math.max(i[l+1][f],i[l][f+1]);const d=[];let h=n,a=r;for(;h>0&&a>0;)s(e[h-1],t[a-1])?(d.unshift([h-1,a-1]),h--,a--):i[h-1][a]>=i[h][a-1]?h--:a--;return d}function Ve(e){return e instanceof N}var N=class ee{constructor(t){o(this,"node"),o(this,"attributes",{}),o(this,"events",{}),o(this,"dynamicContent"),o(this,"children",[]),o(this,"parent"),o(this,"renderer"),o(this,"effectRefs",[]),o(this,"processChildrenRequested",!1),this.node=t.node,this.dynamicContent=t.dynamicContent,this.attributes=t.attributes??{},this.events=t.events??{},this.children=t.children??[]}mountTo({parent:t,renderer:s}){var r;let n=!1;this.renderer=s,t&&this.parent!==t&&(this.parent=t,n=!0),n&&((r=this.parent)==null||r.processChildren()),this.children.forEach(i=>i.mountTo({parent:this,renderer:s})),n&&(this.setUpEffects(),this.bindEvents())}flatNodes(){return(this.dynamicContent?this.children.map(t=>t.flatNodes()).flat():[this.node]).filter(t=>t!=null)}unmount(){var t;(t=this.renderer)==null||t.enqueueChange(()=>{var s,n;this.unbindEvents(),this.clearEffects(),(n=(s=this.node)==null?void 0:s.remove)==null||n.call(s)}),this.parent=void 0,this.renderer=void 0}processChildren(){var t;this.processChildrenRequested||(this.processChildrenRequested=!0,(t=this.renderer)==null||t.enqueueChange(()=>{var s;if(this.dynamicContent)(s=this.parent)==null||s.processChildren();else if(this.node&&(this.node instanceof Element||this.node instanceof DocumentFragment)){const n=Array.from(this.node.childNodes),r=this.children.map(i=>i.flatNodes()).flat();this.reconcileDomChildren(n,r)}this.processChildrenRequested=!1}))}setUpEffects(){const t=this.node;this.dynamicContent&&this.effectRefs.push(G(()=>{var n;const s=[].concat(this.dynamicContent()).map(r=>Ve(r)?r:new ee({node:document.createTextNode(String(r??""))}));this.children.length===s.length&&this.children.every((r,i)=>r===s[i])||(this.children.forEach(s.length?r=>{s.find(i=>i===r)||r.unmount()}:r=>r.unmount()),this.children=s,(n=this.renderer)==null||n.enqueueChange(()=>{this.children.forEach(r=>r.mountTo({parent:this,renderer:this.renderer}))}))})),Object.entries(this.attributes).forEach(([s,n])=>this.effectRefs.push(G(()=>{var i;const r=String(n()??"");(i=this.renderer)==null||i.enqueueChange(()=>t.setAttribute(s,r))})))}clearEffects(){this.effectRefs.forEach(t=>t.destroy()),this.effectRefs=[]}bindEvents(){const t=this.node;Object.entries(this.events).forEach(([s,n])=>{t.addEventListener(s,n)})}unbindEvents(){const t=this.node;Object.entries(this.events).forEach(([s,n])=>{t.removeEventListener(s,n)})}reconcileDomChildren(t,s){const n=be(t,s,(h,a)=>h===a),r=this.node,i=new Set(n.map(([h])=>h));t.forEach((h,a)=>{!i.has(a)&&r.contains(h)&&r.removeChild(h)});let d=r.firstChild;for(let h=0;h<s.length;h++){const a=s[h];if(d===a){d=d.nextSibling;continue}r.insertBefore(a,d)}}},Pe=/^&\[(\d+)]$/,Re=/^<!--&\[(\d+)]-->$/;function te(e,...t){const s=[],n=e.reduce((a,l,f)=>{const y=t[f];if(X(y)){const c=s.length;return s.push(y),a+l+`<!--&[${c}]-->`}return a+l+String(y??"")},""),r=document.createElement("template");r.innerHTML=n.trim();function i(a){const l=a.match(Re);if(l){const f=parseInt(l[1]);return D(s[f])}}function d(a){const l={},f={};return Array.from(a).forEach(c=>{if(c.name.startsWith("on")){const m=i(c.value);if(m){const E=c.name.slice(2).toLowerCase();f[E]=m}}else{const m=i(c.value);l[c.name]=m??(()=>c.value)}a.removeNamedItem(c.name)}),{attributes:l,events:f}}function h(a){var c;if(a.nodeType===Node.COMMENT_NODE){const m=(c=a.nodeValue)==null?void 0:c.match(Pe);if(m){const E=parseInt(m[1]);return a.textContent="",new N({dynamicContent:D(s[E])})}}if([Node.TEXT_NODE,Node.COMMENT_NODE].includes(a.nodeType))return new N({node:a});const{attributes:l,events:f}=d(a.attributes??new NamedNodeMap),y=Array.from(a.childNodes).map(h);return new N({attributes:l,events:f,children:y,node:a})}return Array.from(r.content.childNodes).map(h)}function D(e){if(Y(e))return()=>e[S]();if(k(e)){const t=new e;return()=>t[S]()}return e}var Me=class{constructor(e,t){this.virtualNodes=e,this.container=t,o(this,"root"),o(this,"changeQueue",[]);const s=this.virtualNodes.map(n=>X(n)?new N({dynamicContent:D(n)}):n);this.root=new N({node:this.container,children:s}),this.root.mountTo({renderer:this})}enqueueChange(e){this.changeQueue.length===0&&window.requestAnimationFrame(()=>{for(;this.changeQueue.length;){const t=this.changeQueue.shift();t&&t()}}),this.changeQueue.push(e)}};function qe(e,t){return Array.isArray(e)||(e=[e]),new Me(e,t)}var Q=Le("managed-css-"+Date.now());(()=>{let e=document.querySelector(`style[data-managed-css=${Q}]`);return e||(e=document.createElement("style"),e.setAttribute("data-managed-css",Q),document.head.appendChild(e)),e.sheet})();function Le(e){let t=0;for(const s of e)t=(t<<5)-t+s.charCodeAt(0)|0;return"_"+Math.abs(t).toString(36)}var Z;Z=S;class xe{constructor(){P(this,"value",Se(""));P(this,"http",new pe(()=>({baseUrl:"https://api.openf1.org/v1/drivers",middlewares:[ve()]})));P(this,Z,()=>te`
<button type="button" onclick="${()=>this.fetchValue()}">Test fetch (CORS?)</button>
<br>
<span>${this.value()}</span>
`)}async fetchValue(){const{error:t,data:s}=await this.http.get(me({driver_number:43,session_key:9957}));if(t){console.error("Error fetching data:",t),this.value.set("Error fetching data");return}Array.isArray(s)&&s.length>0?this.value.set(s[0].full_name):this.value.set("No data found")}}qe(te`<h1>Hello F1 Fans 🏁</h1><div>Coming Soon!</div><hr><br><section>${new xe}</section>`,document.querySelector("#app"));
