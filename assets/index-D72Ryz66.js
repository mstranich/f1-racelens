var x=Object.defineProperty;var U=(t,e,s)=>e in t?x(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var w=(t,e,s)=>U(t,typeof e!="symbol"?e+"":e,s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const d of i.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function s(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=s(r);fetch(r.href,i)}})();var F=Object.defineProperty,j=(t,e,s)=>e in t?F(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,o=(t,e,s)=>j(t,typeof e!="symbol"?e+"":e,s),M=class{constructor(t){this.factory=t,o(this,"promise",null)}getValue(){return this.promise??(this.promise=this.factory()),this.promise}isValueCreated(){return this.promise!==null}},D=class L{constructor(e){o(this,"singletons",new Map),o(this,"factories",new Map),o(this,"values",new Map),o(this,"parent"),this.parent=e}addSingleton(e,s){this.singletons.set(e,s??new e)}addTransient(e,s){this.factories.set(e,s)}addValue(e,s){this.values.set(e,s)}get(e){if(typeof e=="function"){if(this.singletons.has(e))return this.singletons.get(e);if(this.factories.has(e))return this.factories.get(e)();if(this.parent)return this.parent.get(e);const s=new e;return this.singletons.set(e,s),s}else if(typeof e=="string"||typeof e=="object"&&typeof e=="symbol"){if(this.values.has(e))return this.values.get(e);if(this.parent)return this.parent.get(e);throw new Error(`Dependency with key '${String(e)}' not found`)}throw new Error("Unsupported key type in the injector")}createScopedContainer(){return new L(this)}};new D;async function A(t){try{return[null,await t()]}catch(e){return[e,void 0]}}var H=class{constructor(t){o(this,"configLazy"),this.configLazy=new M(async()=>{const e=await t();return{baseUrl:e.baseUrl??"",resourcePrefix:e.resourcePrefix??"",request:e.request??{},middlewares:e.middlewares??[]}})}async get(t="",e={}){return this.request(t,{...e,method:"GET"})}async post(t="",e={}){return this.request(t,{...e,method:"POST"})}async put(t="",e={}){return this.request(t,{...e,method:"PUT"})}async delete(t="",e={}){return this.request(t,{...e,method:"DELETE"})}async patch(t="",e={}){return this.request(t,{...e,method:"PATCH"})}async request(t="",e={}){const s=await this.configLazy.getValue(),n={...s.request,...e},r={url:this.resolveUrl(s,t,e.searchParams)},i=s.middlewares??[],d=i.map(c=>c.request).filter(c=>typeof c=="function").reverse().reduce((c,f)=>m=>f({request:m,context:r,next:c}),c=>fetch(r.url,c)),[h,a]=await A(()=>d(n));if(h)return{error:h};const l=i.map(c=>c.response).filter(c=>typeof c=="function").reverse().reduce((c,f)=>m=>f({response:m,context:r,next:c}),async c=>c),[u,v]=await A(()=>l(a));return u?{error:u}:{data:v,response:a}}resolveUrl(t,e,s){const n=this.resolvePath(t.baseUrl,t.resourcePrefix,e);return[/^https?:\/\//.test(n)?n:`/${n}`,this.searchParamsToString(s)].join("?")}resolvePath(...t){const e=[],s=t.splice(0,1)[0]??"",n=/^[a-zA-Z][a-zA-Z\d+\-.]*:\/\//.exec(s);if(n){const r=s.replace(/^[a-zA-Z][a-zA-Z\d+\-.]*:\/\//,"");t.unshift(r),e.push(n[0].replace("//","/"))}return t.filter(r=>r).join("/").split("/").forEach(r=>{r==="."||r===""||(r===".."?e.pop():e.push(r))}),e.join("/")}searchParamsToString(t={}){return t instanceof URLSearchParams?t.toString():Object.entries(t).map(([e,s])=>`${encodeURIComponent(e)}=${encodeURIComponent(String(s))}`).join("&")}};function _({serialize:t=JSON.stringify,deserialize:e}={}){return{async request({request:s,next:n}){const r={...s};return typeof s.body=="object"&&!(s.body instanceof FormData)&&!(s.body instanceof Blob)&&s.body!==null?(r.body=t(s.body),r.headers=new Headers(s.headers),r.headers.append("Content-Type","application/json"),n(r)):n(s)},async response({response:s,next:n}){var i;const r=(i=s.headers.get("content-type"))==null?void 0:i.toLowerCase();return r!=null&&r.includes("application/json")?typeof e!="function"?s.json():e(await s.text()):r!=null&&r.includes("text/")?s.text():n(s)}}}var C=Symbol("Render");function $(t){return typeof t=="function"||N(t)}function N(t){return typeof t=="object"&&t!==null&&C in t&&typeof t[C]=="function"}function I(t,e){return Object.is(t,e)}var z=class extends Error{},E=class extends Error{},P=class extends Error{},W=class extends Error{},G=class{constructor(){o(this,"queue",new Set)}scheduleEffect(t){this.queue.add(t)}cancelEffect(t){this.queue.delete(t)}flushEffects(){for(const t of this.queue)this.queue.delete(t),t.run()}clearEffects(){this.queue.clear()}},g=new G;function S(t){return!!t.producers&&t.producers.length>0&&!!t.producerLastVersions&&t.producerLastVersions.length>0}function b(t){return!!t.consumers&&t.consumers.length>0}var Q=class{constructor(){o(this,"inNotificationPhase",!1),o(this,"epoch",0),o(this,"activeConsumer",null),o(this,"postSignalSetFn"),this.setPostSignalSetMiddleware(()=>g.flushEffects.bind(g))}assertNotInReactiveContext(){if(this.activeConsumer!==null)throw new W}setActiveConsumer(t){const e=this.activeConsumer;return this.activeConsumer=t,e}producerAccessed(t){if(this.inNotificationPhase)throw new z;this.activeConsumer!==null&&(t.consumers=t.consumers??[],t.consumers.includes(this.activeConsumer)||t.consumers.push(this.activeConsumer),this.activeConsumer.producers=this.activeConsumer.producers??[],this.activeConsumer.producerLastVersions=this.activeConsumer.producerLastVersions??[],this.activeConsumer.producers.includes(t)||(this.activeConsumer.producers.push(t),this.activeConsumer.producerLastVersions.push(t.version)))}signalValueChanged(t){var e;t.version++,this.epoch++,this.notifyConsumers(t),(e=this.postSignalSetFn)==null||e.call(this)}setPostSignalSetMiddleware(t){const e=this.postSignalSetFn??(()=>{});this.postSignalSetFn=t(e)}notifyConsumers(t){if(!b(t))return;const e=this.inNotificationPhase;this.inNotificationPhase=!0;try{for(const s of t.consumers)s.notify()}finally{this.inNotificationPhase=e}}updateValueVersion(t){if(!(!t.stale&&t.lastSyncEpoch===this.epoch)){if(!t.shouldRecompute()&&!this.haveAnyConsumerProducersChanged(t)){t.stale=!1,t.lastSyncEpoch=this.epoch;return}t.recomputeValue(),t.stale=!1,t.lastSyncEpoch=this.epoch}}haveAnyConsumerProducersChanged(t){if(!S(t))return!1;for(let e=0;e<t.producers.length;e++){const s=t.producers[e],n=t.producerLastVersions[e];if(n!==s.version||(p.updateValueVersion(s),n!==s.version))return!0}return!1}producerUpdatesAllowed(){var t;return((t=this.activeConsumer)==null?void 0:t.consumerAllowSignalWrites)!==!1}untracked(t){const e=this.setActiveConsumer(null);try{return t()}finally{this.setActiveConsumer(e)}}removeFromGraph(t){if(S(t)){for(const e of t.producers)if(b(e)){const s=e.consumers.indexOf(t);s!==-1&&e.consumers.splice(s,1)}}if(b(t)){for(const e of t.consumers)if(S(e)){let s=-1;for(;(s=e.producers.indexOf(t)??-1)!=-1;)e.producers.splice(s,1),e.producerLastVersions.splice(s,1)}}t.consumers=void 0,t.producers=void 0,t.producerLastVersions=void 0}},p=new Q;function Z(t,e){const s=new B(t,e);return Object.assign(function(){return s.get()},{set(n){s.set(n)},update(n){s.update(n)},toString(){return s.toString()}})}var B=class{constructor(t,e){o(this,"version",0),o(this,"lastSyncEpoch",0),o(this,"stale",!1),o(this,"consumerAllowSignalWrites",!1),o(this,"equals"),o(this,"consumers"),o(this,"producers"),o(this,"producerLastVersions"),o(this,"value"),this.value=t,this.equals=(e==null?void 0:e.equals)??I}get(){return p.producerAccessed(this),this.value}set(t){if(!p.producerUpdatesAllowed())throw new P;this.equals(this.value,t)||(this.value=t,p.signalValueChanged(this))}update(t){if(!p.producerUpdatesAllowed())throw new P;this.set(t(this.value))}shouldRecompute(){return!1}recomputeValue(){throw new E}notify(){throw new E}destroy(){p.removeFromGraph(this)}toString(){return`[Signal: ${this.value}]`}},J=class{constructor(t,e,s=!1){this.fn=t,this.schedule=e,this.consumerAllowSignalWrites=s,o(this,"version",0),o(this,"lastSyncEpoch",0),o(this,"stale",!1),o(this,"consumers"),o(this,"producers"),o(this,"producerLastVersions"),o(this,"hasRun",!1),o(this,"cleanupHandler"),p.assertNotInReactiveContext()}shouldRecompute(){throw new E}recomputeValue(){throw new E}notify(){this.stale||(this.stale=!0,this.schedule(this))}destroy(){this.cleanUp(),this.fn=()=>{},this.schedule=()=>{},this.cleanupHandler=void 0,p.removeFromGraph(this)}run(){if(this.stale=!1,this.hasRun&&!p.haveAnyConsumerProducersChanged(this))return;this.hasRun=!0,this.producers=void 0,this.producerLastVersions=void 0;const t=p.setActiveConsumer(this);try{this.cleanUp(),this.cleanupHandler=void 0,this.fn(this.registerOnCleanUp.bind(this))}finally{p.setActiveConsumer(t)}}cleanUp(){var t;(t=this.cleanupHandler)==null||t.call(this)}registerOnCleanUp(t){this.cleanupHandler=t}};function R(t,e){return new K(t,e)}var K=class{constructor(t,e){this.effectFn=t,o(this,"watcher"),o(this,"onError",console.error),this.onError=(e==null?void 0:e.onError)??this.onError,this.watcher=new J(s=>this.runEffect(s),()=>this.schedule(),e==null?void 0:e.allowSignalWrites),this.watcher.notify(),g.flushEffects()}destroy(){g.cancelEffect(this.watcher),this.watcher.destroy()}runEffect(t){var e;try{this.effectFn(t)}catch(s){(e=this.onError)==null||e.call(this,s)}}schedule(){g.scheduleEffect(this.watcher)}};function X(t,e,s){const n=t.length,r=e.length,i=Array.from({length:n+1},()=>Array(r+1).fill(0));for(let l=0;l<n;l++)for(let u=0;u<r;u++)s(t[l],e[u])?i[l+1][u+1]=i[l][u]+1:i[l+1][u+1]=Math.max(i[l+1][u],i[l][u+1]);const d=[];let h=n,a=r;for(;h>0&&a>0;)s(t[h-1],e[a-1])?(d.unshift([h-1,a-1]),h--,a--):i[h-1][a]>=i[h][a-1]?h--:a--;return d}function Y(t){return t instanceof y}var y=class O{constructor(e){o(this,"node"),o(this,"attributes",{}),o(this,"events",{}),o(this,"dynamicContent"),o(this,"children",[]),o(this,"parent"),o(this,"renderer"),o(this,"effectRefs",[]),o(this,"processChildrenRequested",!1),this.node=e.node,this.dynamicContent=e.dynamicContent,this.attributes=e.attributes??{},this.events=e.events??{},this.children=e.children??[]}mountTo({parent:e,renderer:s}){var r;let n=!1;this.renderer=s,e&&this.parent!==e&&(this.parent=e,n=!0),n&&((r=this.parent)==null||r.processChildren()),this.children.forEach(i=>i.mountTo({parent:this,renderer:s})),n&&(this.setUpEffects(),this.bindEvents())}flatNodes(){return(this.dynamicContent?this.children.map(e=>e.flatNodes()).flat():[this.node]).filter(e=>e!=null)}unmount(){var e;(e=this.renderer)==null||e.enqueueChange(()=>{var s,n;this.unbindEvents(),this.clearEffects(),(n=(s=this.node)==null?void 0:s.remove)==null||n.call(s)}),this.parent=void 0,this.renderer=void 0}processChildren(){var e;this.processChildrenRequested||(this.processChildrenRequested=!0,(e=this.renderer)==null||e.enqueueChange(()=>{var s;if(this.dynamicContent)(s=this.parent)==null||s.processChildren();else if(this.node&&(this.node instanceof Element||this.node instanceof DocumentFragment)){const n=Array.from(this.node.childNodes),r=this.children.map(i=>i.flatNodes()).flat();this.reconcileDomChildren(n,r)}this.processChildrenRequested=!1}))}setUpEffects(){const e=this.node;this.dynamicContent&&this.effectRefs.push(R(()=>{var n;const s=[].concat(this.dynamicContent()).map(r=>Y(r)?r:new O({node:document.createTextNode(String(r??""))}));this.children.length===s.length&&this.children.every((r,i)=>r===s[i])||(this.children.forEach(s.length?r=>{s.find(i=>i===r)||r.unmount()}:r=>r.unmount()),this.children=s,(n=this.renderer)==null||n.enqueueChange(()=>{this.children.forEach(r=>r.mountTo({parent:this,renderer:this.renderer}))}))})),Object.entries(this.attributes).forEach(([s,n])=>this.effectRefs.push(R(()=>{var i;const r=String(n()??"");(i=this.renderer)==null||i.enqueueChange(()=>e.setAttribute(s,r))})))}clearEffects(){this.effectRefs.forEach(e=>e.destroy()),this.effectRefs=[]}bindEvents(){const e=this.node;Object.entries(this.events).forEach(([s,n])=>{e.addEventListener(s,n)})}unbindEvents(){const e=this.node;Object.entries(this.events).forEach(([s,n])=>{e.removeEventListener(s,n)})}reconcileDomChildren(e,s){const n=X(e,s,(h,a)=>h===a),r=this.node,i=new Set(n.map(([h])=>h));e.forEach((h,a)=>{!i.has(a)&&r.contains(h)&&r.removeChild(h)});let d=r.firstChild;for(let h=0;h<s.length;h++){const a=s[h];if(d===a){d=d.nextSibling;continue}r.insertBefore(a,d)}}},k=/^&\[(\d+)]$/,ee=/^<!--&\[(\d+)]-->$/;function T(t,...e){const s=[],n=t.reduce((a,l,u)=>{const v=e[u];if($(v)){const c=s.length;return s.push(v),a+l+`<!--&[${c}]-->`}return a+l+String(v??"")},""),r=document.createElement("template");r.innerHTML=n.trim();function i(a){const l=a.match(ee);if(l){const u=parseInt(l[1]);return N(s[u])?()=>s[u][C]():s[u]}}function d(a){const l={},u={};return Array.from(a).forEach(c=>{if(c.name.startsWith("on")){const f=i(c.value);if(f){const m=c.name.slice(2).toLowerCase();u[m]=f}}else{const f=i(c.value);l[c.name]=f??(()=>c.value)}a.removeNamedItem(c.name)}),{attributes:l,events:u}}function h(a){var c;if(a.nodeType===Node.COMMENT_NODE){const f=(c=a.nodeValue)==null?void 0:c.match(k);if(f){const m=parseInt(f[1]);return a.textContent="",new y({dynamicContent:N(s[m])?()=>s[m][C]():s[m]})}}if([Node.TEXT_NODE,Node.COMMENT_NODE].includes(a.nodeType))return new y({node:a});const{attributes:l,events:u}=d(a.attributes??new NamedNodeMap),v=Array.from(a.childNodes).map(h);return new y({attributes:l,events:u,children:v,node:a})}return Array.from(r.content.childNodes).map(h)}var te=class{constructor(t,e){this.virtualNodes=t,this.container=e,o(this,"root"),o(this,"changeQueue",[]),this.root=new y({node:this.container,children:this.virtualNodes}),this.root.mountTo({renderer:this})}enqueueChange(t){this.changeQueue.length===0&&window.requestAnimationFrame(()=>{for(;this.changeQueue.length;){const e=this.changeQueue.shift();e&&e()}}),this.changeQueue.push(t)}};function se(t,e){return Array.isArray(t)||(t=[t]),new te(t,e)}var V=re("managed-css-"+Date.now());(()=>{let t=document.querySelector(`style[data-managed-css=${V}]`);return t||(t=document.createElement("style"),t.setAttribute("data-managed-css",V),document.head.appendChild(t)),t.sheet})();function re(t){let e=0;for(const s of t)e=(e<<5)-e+s.charCodeAt(0)|0;return"_"+Math.abs(e).toString(36)}var q;q=C;class ne{constructor(){w(this,"value",Z(""));w(this,"http",new H(()=>({baseUrl:"https://api.openf1.org/v1/drivers",middlewares:[_()]})));w(this,q,()=>T`
<button type="button" onclick="${()=>this.fetchValue()}">Test fetch (CORS?)</button>
<br>
<span>${this.value()}</span>
`)}async fetchValue(){const{error:e,data:s}=await this.http.get("",{searchParams:{driver_number:43,session_key:9957}});if(e){console.error("Error fetching data:",e),this.value.set("Error fetching data");return}Array.isArray(s)&&s.length>0?this.value.set(s[0].full_name):this.value.set("No data found")}}se(T`<h1>Hello F1 Fans 🏁</h1><div>Coming Soon!</div><hr><br><section>${new ne}</section>`,document.querySelector("#app"));
